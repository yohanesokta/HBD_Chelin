<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selamat Ulang Tahun, Sayang!</title>
    
    <!-- 
      STYLE & FONTS
      - Google Fonts: Playfair Display (headings) & Lato (body)
      - CSS is embedded in the <style> tag below.
    -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">

    <style>
        /* 
          ========================================
          V3: THE ULTIMATE UPGRADE
          ========================================
        */
        :root {
            --bg-color: #100f1c;
            --primary-text: #d8d8d8;
            --heading-color: #f95d7a;
            --accent-color: #f9a8d4;
            --card-bg: rgba(255, 255, 255, 0.05);
            --glow-color: rgba(249, 93, 122, 0.5);
            --white: #ffffff;
            --shadow: rgba(0, 0, 0, 0.2);
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Lato', sans-serif;
            --spacing-unit: 1rem;
            --border-radius: 16px;
            --backdrop-blur: 5px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            background-color: var(--bg-color);
            color: var(--primary-text);
            font-family: var(--font-body);
            line-height: 1.7;
            overflow-x: hidden;
            cursor: none;
        }

        .cursor-dot, .cursor-outline {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
        }
        .cursor-dot { width: 8px; height: 8px; background-color: var(--heading-color); transition: transform 0.1s ease-out; }
        .cursor-outline { width: 40px; height: 40px; border: 2px solid var(--accent-color); transition: all 0.2s ease-out; opacity: 0; }
        body:hover .cursor-outline { opacity: 0.5; }

        h1, h2, h3 {
            font-family: var(--font-heading);
            color: var(--heading-color);
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 0 0 10px var(--glow-color);
        }
        h1 { font-size: clamp(2.5rem, 9vw, 5rem); line-height: 1.1; color: var(--white); }
        h2 { font-size: clamp(2.2rem, 8vw, 3.8rem); text-align: center; margin-bottom: calc(var(--spacing-unit) * 3); }
        p { font-size: clamp(1rem, 2.5vw, 1.15rem); margin-bottom: var(--spacing-unit); max-width: 65ch; margin-left: auto; margin-right: auto; }

        .section { padding: calc(var(--spacing-unit) * 8) calc(var(--spacing-unit) * 2); position: relative; z-index: 2; overflow: hidden; }
        .container { max-width: 1000px; margin: 0 auto; }
        .full-screen { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        .parallax-bg { position: absolute; top: 0; left: 0; width: 100%; height: 120%; background-size: cover; background-position: center; z-index: -1; filter: brightness(0.6) saturate(1.2); }
        
        #hero::before, #final::before { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; z-index: -1; background-image: radial-gradient(white, rgba(255,255,255,0) 0.5px), radial-gradient(white, rgba(255,255,255,0) 0.5px); background-size: 500px 500px, 300px 300px; background-position: 0 0, 150px 150px; animation: star-anim 60s linear infinite; }
        @keyframes star-anim { from { transform: translateY(0px); } to { transform: translateY(-300px); } }

        #hero .parallax-bg { background-image: url('https://images.unsplash.com/photo-1563720223523-49ae819de217?q=80&w=1935&auto=format&fit=crop'); }
        #hero h1 { font-weight: 800; clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%); }
        .char { transform: translateY(115px); transition: transform .5s; }
        #hero .subtitle { font-weight: 300; margin-top: var(--spacing-unit); max-width: 600px; }

        .scroll-indicator { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); width: 30px; height: 50px; border: 2px solid var(--white); border-radius: 25px; opacity: 0.7; }
        .scroll-indicator::before { content: ''; position: absolute; top: 10px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; background-color: var(--white); border-radius: 50%; animation: scroll-anim 2s infinite; }
        @keyframes scroll-anim { 0% { transform: translate(-50%, 0); opacity: 0; } 40% { opacity: 1; } 80% { transform: translate(-50%, 20px); opacity: 0; } 100% { opacity: 0; } }

        .love-letter-card { background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.1); padding: calc(var(--spacing-unit) * 3); border-radius: var(--border-radius); box-shadow: 0 0 40px var(--shadow), 0 0 10px var(--glow-color); backdrop-filter: blur(var(--backdrop-blur)); -webkit-backdrop-filter: blur(var(--backdrop-blur)); max-width: 700px; margin: 0 auto; text-align: center; }
        .love-letter-card p { margin-bottom: var(--spacing-unit) * 1.5; }

        #gallery { background-color: #1a1526; }
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: calc(var(--spacing-unit) * 1.5); }
        .gallery-item { aspect-ratio: 1 / 1.2; border-radius: var(--border-radius); overflow: hidden; position: relative; transition: transform 0.4s ease; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: all 0.5s ease; }
        .gallery-item:hover { transform: scale(1.03); }
        .gallery-item:hover img { transform: scale(1.1); filter: brightness(0.9); }
        .gallery-item::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 50%); opacity: 0.8; }

        .timeline { position: relative; max-width: 800px; margin: 0 auto; }
        .timeline::after { content: ''; position: absolute; width: 3px; background-color: var(--accent-color); top: 0; bottom: 0; left: 50%; margin-left: -1.5px; z-index: -1; opacity: 0.3; }
        .timeline-item { padding: 10px 40px; position: relative; width: 50%; }
        .timeline-item::after { content: ''; position: absolute; width: 20px; height: 20px; right: -10px; background-color: var(--bg-color); border: 4px solid var(--accent-color); top: 25px; border-radius: 50%; z-index: 1; transition: all 0.5s ease; }
        .timeline-item.is-visible::after { background-color: var(--heading-color); transform: scale(1.2); }
        .timeline-left { left: 0; } .timeline-right { left: 50%; } .timeline-right::after { left: -10px; }
        .timeline-content { padding: 20px; background: var(--card-bg); border-radius: var(--border-radius); border: 1px solid rgba(255, 255, 255, 0.1); }
        .timeline-content h3 { font-size: clamp(1.2rem, 4vw, 1.5rem); } .timeline-content .date { font-size: 0.9rem; font-weight: 300; color: var(--accent-color); margin-bottom: 10px; }
        @media screen and (max-width: 768px) { .timeline::after { left: 31px; } .timeline-item { width: 100%; padding-left: 70px; padding-right: 25px; } .timeline-item::before { content: none; } .timeline-left::after, .timeline-right::after { left: 22px; } .timeline-right { left: 0%; } }
        
        /* New Section: Love Stats */
        #stats .container { text-align:center; }
        #loveChart { max-height: 400px; }

        /* New Section: ID Card */
        #id-card { text-align: center; }
        .id-card-scene { perspective: 1500px; display: inline-block; }
        .id-card-container { width: 300px; height: 480px; position: relative; transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.77, 0, 0.175, 1); cursor: none; }
        .id-card-container.is-flipped { transform: rotateY(180deg); }
        .id-card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; -webkit-backface-visibility: hidden; border-radius: var(--border-radius); overflow: hidden; background: linear-gradient(135deg, #1f1d36, #3d2c56); box-shadow: 0 10px 30px var(--shadow); }
        .id-card-front img { width: 100%; height: 100%; object-fit: cover; }
        .id-card-back { transform: rotateY(180deg); padding: 20px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .id-card-back h3 { color: var(--accent-color); font-size: 1.5rem; }
        .id-card-back .field { margin: 10px 0; width: 100%; }
        .id-card-back .field-label { font-size: 0.8rem; color: var(--primary-text); }
        .id-card-back .field-value { font-size: 1.1rem; color: var(--white); font-weight: bold; }

        /* New Section: 3D Cube */
        #dimension { background-color: #1a1526; text-align:center; }
        .cube-scene { perspective: 2000px; display: flex; justify-content: center; align-items: center; min-height: 60vh; }
        .cube { width: 300px; height: 300px; position: relative; transform-style: preserve-3d; transform: rotateX(-30deg) rotateY(-45deg); animation: cube-spin 30s infinite linear; }
        @media (max-width: 768px) { .cube { width: 200px; height: 200px; } }
        @keyframes cube-spin { from { transform: rotateX(0) rotateY(0); } to { transform: rotateX(360deg) rotateY(360deg); } }
        .cube-face { position: absolute; width: 100%; height: 100%; border: 1px solid var(--accent-color); background-size: cover; background-position: center; background-color: rgba(249, 93, 122, 0.1); }
        .cube-front  { transform: rotateY(0deg) translateZ(150px); }
        .cube-back   { transform: rotateY(180deg) translateZ(150px); }
        .cube-right  { transform: rotateY(90deg) translateZ(150px); }
        .cube-left   { transform: rotateY(-90deg) translateZ(150px); }
        .cube-top    { transform: rotateX(90deg) translateZ(150px); }
        .cube-bottom { transform: rotateX(-90deg) translateZ(150px); }
        @media (max-width: 768px) {
            .cube-front  { transform: rotateY(0deg) translateZ(100px); }
            .cube-back   { transform: rotateY(180deg) translateZ(100px); }
            .cube-right  { transform: rotateY(90deg) translateZ(100px); }
            .cube-left   { transform: rotateY(-90deg) translateZ(100px); }
            .cube-top    { transform: rotateX(90deg) translateZ(100px); }
            .cube-bottom { transform: rotateX(-90deg) translateZ(100px); }
        }

        #game { text-align: center; }
        .game-container { background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.1); padding: calc(var(--spacing-unit) * 4) calc(var(--spacing-unit) * 2); border-radius: var(--border-radius); box-shadow: 0 0 40px var(--shadow); backdrop-filter: blur(var(--backdrop-blur)); }
        .game-buttons { margin-top: 30px; position: relative; min-height: 150px; display: flex; justify-content: center; align-items: center; gap: 20px; }
        .game-btn { padding: 15px 35px; font-size: 1.2rem; font-weight: bold; border: 2px solid transparent; border-radius: var(--border-radius); cursor: none; transition: all 0.3s ease; color: var(--white); }
        #yesBtn { background-color: var(--heading-color); box-shadow: 0 0 20px var(--glow-color); }
        #yesBtn:hover { transform: scale(1.1); background-color: #ff7aa2; }
        #noBtn { background-color: #555; position: absolute; }
        .game-result { margin-top: 40px; font-size: 2.5rem; color: var(--heading-color); font-family: var(--font-heading); transform: scale(0); transition: transform 0.5s ease-in-out; }

        #surprise { background-color: #1a1526; }
        .surprise-text { font-family: var(--font-heading); font-size: clamp(2rem, 7vw, 3.5rem); text-align: center; min-height: 150px; color: var(--accent-color); }

        #wish { position: relative; background: linear-gradient(135deg, #100f1c, #1f1d36, #3d2c56); background-size: 400% 400%; animation: gradient-anim 15s ease infinite; }
        @keyframes gradient-anim { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .wish-content { text-align: center; position: relative; z-index: 2; }
        .floating-hearts { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 1; }
        .heart { position: absolute; bottom: -50px; font-size: 2rem; color: var(--accent-color); animation: float-up 10s infinite linear; text-shadow: 0 0 15px var(--glow-color); opacity: 0; }
        @keyframes float-up { 0% { transform: translateY(0); opacity: 0; } 10% { opacity: 0.7; } 90% { opacity: 0.7; } to { transform: translateY(-105vh) rotate(360deg); opacity: 0; } }

        #final .parallax-bg { background-image: url('https://images.unsplash.com/photo-1542100057-554439c3a388?q=80&w=1974&auto=format&fit=crop'); filter: brightness(0.5); }
        #final h2 { font-size: clamp(2.5rem, 7vw, 4.5rem); }
        
    </style>
</head>
<body>
    
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <section id="hero" class="full-screen section">
        <div class="parallax-bg"></div>
        <div class="container">
            <h1 class="hero-title">Selamat Ulang Tahun, Sayangku ‚ù§Ô∏è</h1>
            <p class="subtitle hero-subtitle">Buat orang yang bikin duniaku lebih cerah, hari-hariku lebih kocak, dan hatiku lebih penuh. Ini cuma pengingat kecil betapa berartinya kamu buat aku.</p>
        </div>
        <div class="scroll-indicator"></div>
    </section>

    <section id="letter" class="section">
        <div class="container">
            <div class="love-letter-card">
                <h2>Sepucuk Surat Digital Buat Kamu</h2>
                <p>Sayangku [Nama Pacar],</p>
                <p>Kalau aku disuruh nulis semua alesan kenapa aku cinta kamu, kayaknya butuh satu galaksi, bukan cuma satu halaman web. Tapi hari ini, di hari spesialmu, aku mau coba rangkum sedikit dari keajaiban itu.</p>
                <p>Kamu itu partner in crime-ku, komedian favoritku, dan jiwa terindah yang pernah aku kenal. Setiap hari sama kamu itu petualangan baru yang nggak pernah aku pengen udahan. Makasih ya udah jadi kamu.</p>
                <p>Dengan segenap cintaku,<br> [Namamu]</p>
            </div>
        </div>
    </section>

    <section id="gallery" class="section">
        <div class="container">
            <h2>Galeri Kenangan Kita</h2>
            <div class="gallery-grid">
                <!-- USER ACTION: Ganti src gambar ini dengan foto-foto kenangan kalian -->
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1554128216-092284b33342?q=80&w=1964&auto=format&fit=crop" alt="Memory 1"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1596773413531-1b8f41f71a9a?q=80&w=1964&auto=format&fit=crop" alt="Memory 2"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1596773413554-3c66f8072eff?q=80&w=1964&auto=format&fit=crop" alt="Memory 3"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1549402511-3c69e4a8a65e?q=80&w=1974&auto=format&fit=crop" alt="Memory 4"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1567503746627-c75869f86f8a?q=80&w=1974&auto=format&fit=crop" alt="Memory 5"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1559526724-4f6838a1f6a1?q=80&w=1974&auto=format&fit=crop" alt="Memory 6"></div>
            </div>
        </div>
    </section>

    <section id="timeline" class="section">
        <div class="container">
            <h2>Jejak Kisah Kita</h2>
            <div class="timeline">
                <div class="timeline-item timeline-left">
                    <div class="timeline-content">
                        <h3>Pertama Kali "Hai"</h3>
                        <span class="date">Desember 2023</span>
                        <p>Hari di mana semua dimulai. Gak nyangka obrolan random jadi se-epic ini.</p>
                    </div>
                </div>
                <div class="timeline-item timeline-right">
                    <div class="timeline-content">
                        <h3>Trip Pertama Kita</h3>
                        <span class="date">Maret 2024</span>
                        <p>Trip spontan ke pantai itu, di mana kita ngobrol ngalor-ngidul sampe malem di bawah bintang.</p>
                    </div>
                </div>
                 <div class="timeline-item timeline-left">
                    <div class="timeline-content">
                        <h3>Resmi Jadi "Kita"</h3>
                        <span class="date">Juni 2024</span>
                        <p>Hari di mana kita mutusin buat ngejalanin petualangan gila ini bareng-bareng.</p>
                    </div>
                </div>
                <div class="timeline-item timeline-right">
                    <div class="timeline-content">
                        <h3>Hari Ini & Selamanya</h3>
                        <span class="date">Ulang Tahunmu!</span>
                        <p>Ngerayain kamu hari ini, dan super excited buat semua chapter selanjutnya yang bakal kita tulis bareng.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- NEW SECTION: Love Stats -->
    <section id="stats" class="section">
        <div class="container">
            <h2>Statistik Sayangku ke Kamu</h2>
            <p>Katanya cinta itu buta, tapi data nggak pernah bohong. Ini grafik rasa sayangku yang fluktuatif tapi selalu trending up buat kamu.</p>
            <canvas id="loveChart"></canvas>
        </div>
    </section>

    <!-- NEW SECTION: ID Card -->
    <section id="id-card" class="section">
        <div class="container">
            <h2>Kartu Tanda Cinta</h2>
            <p>Ini bukan KTP biasa. Klik kartunya buat liat detailnya!</p>
            <div class="id-card-scene">
                <div class="id-card-container" id="idCard">
                    <div class="id-card-face id-card-front">
                        <!-- USER ACTION: Ganti src gambar ini dengan foto terbaik pacarmu -->
                        <img src="https://images.unsplash.com/photo-1581094596321-4bde4a3d9034?q=80&w=1935&auto=format&fit=crop" alt="Foto ID">
                    </div>
                    <div class="id-card-face id-card-back">
                        <h3>KARTU TANDA CINTA</h3>
                        <div class="field">
                            <div class="field-label">NAMA</div>
                            <div class="field-value">[Nama Pacar]</div>
                        </div>
                        <div class="field">
                            <div class="field-label">STATUS</div>
                            <div class="field-value">The Only One</div>
                        </div>
                        <div class="field">
                            <div class="field-label">VALID THRU</div>
                            <div class="field-value">FOREVER ‚ù§Ô∏è</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- NEW SECTION: 3D Cube -->
    <section id="dimension" class="section">
        <div class="container">
            <h2>Dimensi Cinta Kita</h2>
            <p>Beberapa kenangan kita dalam bentuk 3D. Coba deh puter-puter kubusnya pake mouse atau sentuhan jarimu!</p>
            <div class="cube-scene">
                <div class="cube" id="cube">
                    <!-- USER ACTION: Ganti keenam gambar ini dengan foto kenangan kalian -->
                    <div class="cube-face cube-front" style="background-image: url('https://images.unsplash.com/photo-1554128216-092284b33342?q=80&w=800&auto=format&fit=crop')"></div>
                    <div class="cube-face cube-back" style="background-image: url('https://images.unsplash.com/photo-1596773413531-1b8f41f71a9a?q=80&w=800&auto=format&fit=crop')"></div>
                    <div class="cube-face cube-right" style="background-image: url('https://images.unsplash.com/photo-1596773413554-3c66f8072eff?q=80&w=800&auto=format&fit=crop')"></div>
                    <div class="cube-face cube-left" style="background-image: url('https://images.unsplash.com/photo-1549402511-3c69e4a8a65e?q=80&w=800&auto=format&fit=crop')"></div>
                    <div class="cube-face cube-top" style="background-image: url('https://images.unsplash.com/photo-1567503746627-c75869f86f8a?q=80&w=800&auto=format&fit=crop')"></div>
                    <div class="cube-face cube-bottom" style="background-image: url('https://images.unsplash.com/photo-1559526724-4f6838a1f6a1?q=80&w=800&auto=format&fit=crop')"></div>
                </div>
            </div>
        </div>
    </section>

    <section id="game" class="section">
        <div class="container">
            <div class="game-container">
                <h2>Satu Pertanyaan Penting...</h2>
                <p>Jawab yang jujur ya!</p>
                <div class="game-buttons">
                    <button id="yesBtn" class="game-btn">MASIH SAYANG ‚ù§Ô∏è</button>
                    <button id="noBtn" class="game-btn">ENGGAK üíî</button>
                </div>
                <p id="gameResult" class="game-result"></p>
            </div>
        </div>
    </section>

    <section id="surprise" class="section">
        <div class="container">
            <h2 class="surprise-title">Satu Janji Kecil...</h2>
            <p id="surpriseText" class="surprise-text"></p>
        </div>
    </section>

    <section id="wish" class="section">
        <div class="floating-hearts" id="floatingHearts"></div>
        <div class="container wish-content">
            <h2>Doa dan Harapanku Buat Kamu</h2>
            <p>Di hari spesialmu ini, aku berdoa semoga semua mimpimu tercapai. Semoga hidupmu dipenuhi kebahagiaan, tawa, dan cinta sebanyak yang kamu kasih ke aku.</p>
            <p>Semoga kamu selalu sehat, sukses di semua yang kamu lakuin, dan senyum indahmu itu nggak pernah pudar. Aku bakal selalu di sini, nyemangatin kamu di setiap langkah.</p>
        </div>
    </section>
    
    <section id="final" class="full-screen section">
        <div class="parallax-bg"></div>
        <div class="container">
            <h2 class="final-text">Pokoknya, aku sayang kamu lebih dari kata-kata.</h2>
        </div>
    </section>

    <!-- 
      JAVASCRIPT LIBRARIES (CDN)
      - GSAP & Plugins: For professional animations
      - Confetti: For the mini-game celebration
      - Chart.js: For the love stats graph
    -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/SplitText.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        gsap.registerPlugin(ScrollTrigger, SplitText);

        const isMobile = window.innerWidth < 768;

        /* CUSTOM CURSOR */
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        if (!isMobile) {
            window.addEventListener('mousemove', (e) => {
                const { clientX, clientY } = e;
                gsap.to(cursorDot, { x: clientX, y: clientY, duration: 0.2, ease: 'power2.out' });
                gsap.to(cursorOutline, { x: clientX, y: clientY, duration: 0.4, ease: 'power2.out' });
            });
            const handleMouseEnter = () => gsap.to(cursorOutline, { scale: 1.5, opacity: 1, duration: 0.3 });
            const handleMouseLeave = () => gsap.to(cursorOutline, { scale: 1, opacity: 0.5, duration: 0.3 });
            document.querySelectorAll('a, button, .gallery-item, .id-card-container, .cube').forEach(el => {
                el.addEventListener('mouseenter', handleMouseEnter);
                el.addEventListener('mouseleave', handleMouseLeave);
            });
        } else {
            cursorDot.style.display = 'none';
            cursorOutline.style.display = 'none';
            document.body.style.cursor = 'auto';
        }

        /* ANIMATIONS */
        const heroTitle = new SplitText('.hero-title', { type: 'chars' });
        gsap.timeline({ defaults: { ease: 'power4.out' } })
            .from(heroTitle.chars, { y: 115, stagger: 0.03, duration: 1 })
            .from('.hero-subtitle', { opacity: 0, y: 30, duration: 1.2 }, '-=0.7')
            .from('.scroll-indicator', { opacity: 0, y: 20, duration: 1 }, '-=0.5');

        gsap.utils.toArray('.parallax-bg').forEach(bg => {
            gsap.to(bg, {
                y: (i, target) => -(target.parentElement.offsetHeight - target.offsetHeight) * 0.4,
                ease: "none",
                scrollTrigger: { trigger: bg.parentElement, start: "top top", end: "bottom top", scrub: true }
            });
        });
        
        const animateOnScroll = (elem, vars) => gsap.from(elem, { scrollTrigger: { trigger: elem, start: 'top 85%', toggleActions: 'play none none none' }, ...vars });
        animateOnScroll('.love-letter-card', { opacity: 0, y: 80, duration: 1, ease: 'power3.out' });
        gsap.from('.gallery-item', { scrollTrigger: { trigger: '.gallery-grid', start: 'top 80%' }, opacity: 0, y: 50, scale: 0.9, duration: 0.8, stagger: 0.1, ease: 'power3.out' });
        gsap.utils.toArray('.timeline-item').forEach(item => {
            gsap.from(item, {
                scrollTrigger: { trigger: item, start: 'top 85%', onEnter: () => item.classList.add('is-visible') },
                opacity: 0, x: item.classList.contains('timeline-left') ? -80 : 80, duration: 1.2, ease: 'power3.out'
            });
        });
        animateOnScroll('#stats .container', { opacity: 0, y: 50, duration: 1 });
        animateOnScroll('#id-card .container', { opacity: 0, y: 50, duration: 1 });
        animateOnScroll('#dimension .container', { opacity: 0, y: 50, duration: 1 });
        animateOnScroll('.game-container', { opacity: 0, scale: 0.9, duration: 1, ease: 'power3.out' });
        animateOnScroll('.surprise-title', { opacity: 0, y: 50, duration: 1 });
        animateOnScroll('#wish h2', { opacity: 0, y: 50, duration: 1 });
        animateOnScroll('#wish p', { opacity: 0, y: 50, duration: 1, stagger: 0.2 });
        animateOnScroll('.final-text', { opacity: 0, scale: 0.8, duration: 1.5, ease: 'power3.out' });

        /* LOVE STATS CHART */
        const loveChartCanvas = document.getElementById('loveChart');
        let loveChart;
        ScrollTrigger.create({
            trigger: loveChartCanvas,
            start: 'top 80%',
            once: true,
            onEnter: () => {
                const ctx = loveChartCanvas.getContext('2d');
                const gradient = ctx.createLinearGradient(0, 0, 0, 400);
                gradient.addColorStop(0, 'rgba(249, 93, 122, 0.6)');
                gradient.addColorStop(1, 'rgba(249, 93, 122, 0)');
                loveChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array.from({length: 24}, (_, i) => `Bulan ${i + 1}`),
                        datasets: [{
                            label: 'Rasa Sayang',
                            data: [80, 85, 90, 75, 60, 65, 70, 85, 95, 100, 85, 70, 75, 80, 90, 95, 80, 65, 70, 80, 90, 100, 100, 110],
                            borderColor: 'rgba(249, 93, 122, 1)',
                            borderWidth: 3,
                            fill: true,
                            backgroundColor: gradient,
                            tension: 0.4,
                            pointBackgroundColor: 'rgba(249, 93, 122, 1)',
                            pointRadius: 0,
                            pointHoverRadius: 8,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: { duration: 2000, easing: 'easeInOutQuart' },
                        scales: {
                            y: { display: false },
                            x: { ticks: { color: '#d8d8d8', font: { size: 10 } } }
                        },
                        plugins: { legend: { display: false }, tooltip: { enabled: true } }
                    }
                });
            }
        });
        
        /* ID CARD FLIP */
        const idCard = document.getElementById('idCard');
        idCard.addEventListener('click', () => idCard.classList.toggle('is-flipped'));

        /* 3D CUBE DRAG */
        const cube = document.getElementById('cube');
        let isDragging = false, prevX, prevY, rotationX = -30, rotationY = -45;
        cube.style.animation = 'none'; // Stop auto-spin
        
        const startDrag = (e) => {
            isDragging = true;
            prevX = e.clientX || e.touches[0].clientX;
            prevY = e.clientY || e.touches[0].clientY;
            cube.style.transition = 'none';
        };

        const onDrag = (e) => {
            if (!isDragging) return;
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            const dX = clientX - prevX;
            const dY = clientY - prevY;
            
            rotationY += dX * 0.5;
            rotationX -= dY * 0.5;
            rotationX = Math.max(-90, Math.min(90, rotationX)); // Clamp vertical rotation

            gsap.to(cube, {
                rotationX: rotationX,
                rotationY: rotationY,
                duration: 0.5,
                ease: 'power2.out'
            });

            prevX = clientX;
            prevY = clientY;
        };

        const endDrag = () => { isDragging = false; cube.style.transition = 'transform 0.5s ease-out'; };
        
        cube.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', onDrag);
        document.addEventListener('mouseup', endDrag);
        cube.addEventListener('touchstart', startDrag, { passive: true });
        document.addEventListener('touchmove', onDrag, { passive: true });
        document.addEventListener('touchend', endDrag);

        /* MINI GAME */
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const gameContainer = document.querySelector('.game-container');
        const gameResult = document.getElementById('gameResult');
        const noButtonPhrases = ["Yakin?", "Serius?", "Coba lagi üòú", "Nggak boleh!", "Pikirin lagi...", "Are you sure?!"];

        const moveNoButton = (e) => {
            const containerRect = gameContainer.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();
            const randomX = Math.random() * (containerRect.width - btnRect.width);
            const randomY = Math.random() * (containerRect.height - btnRect.height);
            const randomPhrase = noButtonPhrases[Math.floor(Math.random() * noButtonPhrases.length)];

            gsap.to(noBtn, { duration: 0.4, x: randomX, y: randomY, ease: 'power3.out' });
            noBtn.textContent = randomPhrase;
            
            // Funny feedback
            if (e.type !== 'mouseover') {
                gsap.fromTo(gameContainer, { x: 0 }, { x: 10, duration: 0.05, repeat: 5, yoyo: true, clearProps: 'x' });
            }
        };

        noBtn.addEventListener('mouseover', moveNoButton);
        noBtn.addEventListener('click', moveNoButton);

        yesBtn.addEventListener('click', () => {
            const duration = 5 * 1000, animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 10000 };
            const randomInRange = (min, max) => Math.random() * (max - min) + min;

            const interval = setInterval(() => {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
                confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
            }, 250);
            
            gsap.timeline()
                .to([yesBtn, noBtn], { opacity: 0, scale: 0, duration: 0.5, ease: 'back.in(1.7)' })
                .to(gameResult, { onStart: () => gameResult.textContent = "UDAH KUTEBAK SIH ‚ù§Ô∏è", scale: 1.2, duration: 0.5, ease: 'back.out(1.7)' })
                .to(gameResult, { scale: 1, duration: 1.5, ease: 'elastic.out(1, 0.3)' })
                .to('body', { '--bg-color': '#1f1d36', duration: 1 }, 0);
        });
        
        /* SURPRISE TYPING ANIMATION */
        const surpriseTextElement = document.getElementById('surpriseText');
        const surpriseText = "Aku janji bakal selalu bikin kamu ketawa, jadi fans nomer #1 kamu, dan makin sayang setiap harinya. Yuk, bikin lebih banyak lagi kenangan indah bareng-bareng.";
        let i = 0;
        const typeWriter = () => { if (i < surpriseText.length) { surpriseTextElement.innerHTML += surpriseText.charAt(i++); setTimeout(typeWriter, 60); } };
        ScrollTrigger.create({ trigger: '#surprise', start: 'top 70%', onEnter: () => { if (i === 0) typeWriter(); }, once: true });

        /* FLOATING HEARTS */
        const floatingHeartsContainer = document.getElementById('floatingHearts');
        gsap.ticker.add(() => {
            if (Math.random() < 0.03) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerText = ['‚ù§Ô∏è', 'üíñ', 'üíï', 'üíó', 'üíì'][Math.floor(Math.random() * 5)];
                floatingHeartsContainer.appendChild(heart);
                gsap.fromTo(heart, {
                    x: Math.random() * window.innerWidth, y: window.innerHeight + 50, scale: Math.random() * 1 + 0.5, opacity: 0
                }, {
                    y: -100, x: '+=_random(-100, 100)', opacity: 0.7, scale: '+=0.2', duration: Math.random() * 5 + 5, ease: "none", onComplete: () => heart.remove()
                });
            }
        });
    });
    </script>

</body>
</html>
